syntax = "proto3";

package nlan;

service NlanAgent {
  rpc Add (Request) returns (Reply) {}
  rpc Update (Request) returns (Reply) {}
  rpc Delete (Request) returns (Reply) {}
}

// NLAN module
message Nlan {
  optional Request Request = 1; // nlan/nlan.yang:107:3
  optional Response Response = 2; // nlan/nlan.yang:118:3
}

message Request {
  optional Model Model = 1; // nlan/nlan.yang:108:5
}

message Model {
  optional Dvr Dvr = 1; // nlan/nlan.yang:109:7
  optional Ptn Ptn = 2; // nlan/nlan.yang:112:7
}

message Dvr {
  optional bool OvsBridges = 1; // nlan/nlan.yang:13:5
  repeated Subnets Subnets = 2; // nlan/nlan.yang:28:5
  repeated Vxlan Vxlan = 3; // nlan/nlan.yang:18:5
}

message Subnets {
  repeated IpDvr IpDvr = 1; // nlan/nlan.yang:37:6
  repeated string Peers = 2; // nlan/nlan.yang:54:7
  repeated string Ports = 3; // nlan/nlan.yang:51:6
  optional uint32 Vid = 4; // nlan/nlan.yang:30:7
  optional uint32 Vni = 5; // nlan/nlan.yang:33:6
}

message IpDvr {
  optional string Addr = 1; // nlan/nlan.yang:39:8
  optional string Dhcp = 2; // nlan/nlan.yang:46:8
  optional string Mode = 3; // nlan/nlan.yang:42:8
}

message Vxlan {
  optional string LocalIp = 1; // nlan/nlan.yang:20:7
  repeated string RemoteIps = 2; // nlan/nlan.yang:23:7
}

message Ptn {
  repeated PtnL2Vpn PtnL2Vpn = 1; // nlan/nlan.yang:88:5
  repeated PtnLinks PtnLinks = 2; // nlan/nlan.yang:76:5
  repeated PtnNodes PtnNodes = 3; // nlan/nlan.yang:62:5
}

message PtnL2Vpn {
  optional string Id = 1; // nlan/nlan.yang:89:7
  optional string Ip = 2; // nlan/nlan.yang:101:7
  repeated string Peers = 3; // nlan/nlan.yang:98:7
  optional uint32 Vid = 4; // nlan/nlan.yang:92:7
  optional uint32 Vni = 5; // nlan/nlan.yang:95:7
}

message PtnLinks {
  optional string Id = 1; // nlan/nlan.yang:77:7
  optional string LocalIp = 2; // nlan/nlan.yang:80:7
  repeated string RemoteIps = 3; // nlan/nlan.yang:83:7
}

message PtnNodes {
  optional string Id = 1; // nlan/nlan.yang:63:7
  optional Nodes Nodes = 2; // nlan/nlan.yang:66:7
}

message Nodes {
  optional string L2Sw = 1; // nlan/nlan.yang:70:9
  optional string Ptn = 2; // nlan/nlan.yang:67:9
}

message Response {
  optional string LogMessage = 1; // nlan/nlan.yang:122:5
  optional uint32 Result = 2; // nlan/nlan.yang:119:5
}
